<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title></title>
		<meta name="description" content="" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="" />
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
			integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.2/js/bootstrap.bundle.min.js" integrity="sha512-BOsvKbLb0dB1IVplOL9ptU1EYA+LuCKEluZWRUYG73hxqNBU85JBIBhPGwhQl7O633KtkjMv8lvxZcWP+N3V3w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.1/css/bootstrap.min.css"
			integrity="sha512-siwe/oXMhSjGCwLn+scraPOWrJxHlUgMBMZXdPe2Tnk3I0x3ESCoLz7WZ5NTH6SZrywMY+PB1cjyqJ5jAluCOg=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		/>
	</head>
	<body>
		<!--[if lt IE 7]>
			<p class="browsehappy">
				You are using an <strong>outdated</strong> browser. Please
				<a href="#">upgrade your browser</a> to improve your experience.
			</p>
		<![endif]-->
		<div class="d-flex flex-column align-items-stretch flex-shrink-0 bg-white" style="width: 100vw; height: 100vh;">
			<a class="d-flex align-items-center flex-shrink-0 p-3 link-dark text-decoration-none border-bottom">
				<svg class="bi pe-none me-2" width="30" height="24"><use xlink:href="#bootstrap"></use></svg>
				<div class="dropdown-center p-3">
					<button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
					  Actions
					</button>
					<ul class="dropdown-menu">
					  <li><button class="dropdown-item" type="button" onclick="noteModal.show()">Add new note</button></li>
					  <li><button class="dropdown-item" type="button">Create new client account</button></li>
					  <li><button class="dropdown-item" type="button">Edit a client's information</button></li>
					  <li><button class="dropdown-item" type="button" onclick="$().logout()">Logout</button></li>
					</ul>
				</div>
				<span href="/" class="fs-5 fw-semibold">CaFHS Notetaking</span>
			</a>

			<!-- Login Modal -->
			<div class="modal fade" id="loginModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
				<form class="needs-login-validation" novalidate>
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="staticBackdropLabel">Please Login</h5>
							</div>
							<div class="modal-body">
								<div class="md-form mb-3">
									<label for="loginEmail" class="form-label" required>Email address</label>
									<input type="email" id="loginEmail" class="form-control validate" placeholder="name@example.com">
									<div class="invalid-feedback">
										Please enter a valid CaFHS email address.
									</div>
								</div>
								<div class="md-form mb-3">
									<label for="loginPassword" class="form-label" required>Password</label>
									<input type="password" id="loginPassword" class="form-control validate">
									<div class="invalid-feedback">
										Please enter a password over 8 characters long.
									</div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-primary" onclick="$().login()">Login</button>
							</div>
						</div>
					</div>
				</form>
			</div>

			<!-- Notes modal -->
			<div class="modal fade" id="noteModal" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
				<form class="needs-note-validation" novalidate>
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="staticBackdropLabel">Create a new note</h5>
							</div>
							<div class="modal-body">
								<div class="md-form mb-3">
									<label for="noteDate" class="form-label">Date</label>
									<input type="datetime-local" id="noteDate" class="form-control validate" required>
									<div class="invalid-feedback">
										Please select a date.
									</div>
								</div>
								<div class="md-form mb-3">
									<label for="noteText" class="form-label">Note</label>
									<textarea class="form-control validate" rows="4" id="noteText" required></textarea>
									<div class="invalid-feedback">
										Please include a note.
									</div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
								<button type="submit" class="btn btn-primary">Submit</button>
							</div>
						</div>
					</div>
				</form>
			</div>

			<!-- client info modal -->
			<div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
				<form class="needs-client-validation" novalidate>
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="staticBackdropLabel">Create a new note</h5>
							</div>
							<div class="modal-body">
								<div class="md-form mb-3">
									<label for="noteDate" class="form-label">Date</label>
									<input type="datetime-local" id="noteDate" class="form-control validate" required>
									<div class="invalid-feedback">
										Please select a date.
									</div>
								</div>
								<div class="md-form mb-3">
									<label for="noteText" class="form-label">Note</label>
									<textarea class="form-control validate" rows="4" id="noteText" required></textarea>
									<div class="invalid-feedback">
										Please include a note.
									</div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
								<button type="submit" class="btn btn-primary">Submit</button>
							</div>
						</div>
					</div>
				</form>
			</div>

			<div class="d-flex flex-row">
				<div class="client-list list-group list-group-flush border-bottom scrollarea" style="width: 25vw; height: calc(100vh - 63px); overflow-y: scroll;">
				</div>
				<div class="d-flex align-items-center justify-content-center flex-shrink-0 bg-white" style="width: 75vw; height: calc(100vh - 63px); right: 0; overflow-y: scroll;">
					<div class="container notes-container">
					</div>
					<div class="toast-container position-fixed bottom-0 end-0 p-3">
						<div id="messageToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
							<div class="toast-header">
								<svg class="bd-placeholder-img rounded me-2" width="20" height="20" xlmns="http://www.w3.org/2000/svg" aria-hidden="true" preserveAspectRatio="xMidYMid slice">
									<rect width="100%" height="100%" fill="#198754"></rect>
								</svg>
								<strong class="me-auto">Information</strong>
								<small class="text-muted">just now</small>
								<button type="button" class="btn-close" data-bs-dismess="toast" aria-label="Close"></button>
							</div>
							<div class="toast-body">
								Successfully logged in.
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Include the external script file -->
		<script src="script.js"></script>
		<script>
			$(document).ready(function () {
				$().logout();
				$().login();
				//noteModal.show();
				//loginModal.show();
			});

			/* Validation for logging in */
			(() => {
				'use strict';

				const forms = document.querySelectorAll('.needs-login-validation');

				Array.from(forms).forEach(form => {
					form.addEventListener('submit', event => {
						if (!form.checkValidity()) {
							event.preventDefault();
							event.stopPropagation();
						} else {
							event.preventDefault();
							$().login();
						}

						form.classList.add("was-validated");
					}, false);
				});
			})();

			/* Validation for when creating new notes */
			(() => {
				'use strict';

				const forms = document.querySelectorAll('.needs-note-validation'); //The input form for note creation

				//Iterate over all forms
				Array.from(forms).forEach(form => {
					form.addEventListener('submit', event => {
						if (!form.checkValidity()) { 	//If all forms are not valid
							event.preventDefault();		//Prevent default (do not reload page)
							event.stopPropagation();	//Stop checking forms
						} else {
							event.preventDefault();		//Prevent default (do not reload page)
							$().createNote();			//Submit new note information to server
						}

						form.classList.add('was-validated'); //Form was validated, add to class list

					}, false);
				});
			})();

			/* Validation for when updating or creating client's accounts */
			(() => {
				const forms = document.querySelectorAll('.needs-client-validation'); //The input form for note creation

				//Iterate over all forms
				Array.from(forms).forEach(form => {
					form.addEventListener('submit', event => {
						if (!form.checkValidity()) { 	//If all forms are not valid
							event.preventDefault();		//Prevent default (do not reload page)
							event.stopPropagation();	//Stop checking forms
						} else {
							event.preventDefault();		//Prevent default (do not reload page)
							//$().createNote();			//Submit new note information to server
						}

						form.classList.add('was-validated'); //Form was validated, add to class list

					}, false);
				});
			})();
		</script>
	</body>
</html>
